definitions:
  крема:
    description: |-
      пенка на поверности эспрессо
      формируется во время экстракции эспрессо 

      Цитата: “Попадая в чашку, жидкость оказывается в условиях 
        нормального атмосферного давления и не в состоянии 
        удерживать газ, который выходит в виде тысячи пузырьков. 
        Они и формируют плотную пенку”.
      
      О чём крема нам говорит?
      что кофе свеж и хорошо экстрагирован и что бариста контролирует кофе.
  
  латте-арт:
    description: |-
      Это способ вливания молока в эспрессо, благодаря которому 
      на поверхности получаются узоры. 
      Так же можно просто рисовать острым предметом на верхнем слое пены.
  
      Требует чёткого соблюдения пропорций молока и кофе.


  coffe-params:
  - name: объём
    эспрессо: &one-espresso-shot
      объём: 25-30 мл

  - name: время приготовления
    быстро: &time-20-30-sec
      время приготовления: 20-30 сек

  - name: температура готового
    горячий: &temp-espresso
      температура готового напитка: 85-95 градусов

  - name: основа 
    сам себе основа: &based-on-self
      основа: cам себе основа

  - name: добавка к кофе
    чистый кофе: &with-none
      добвка к основе: без добавки.
    горячая вода: &with-hot-water
      добвка к основе: вода ~ 90 градусов

  - name: посуда
    чашечка эспрессо: &espresso-cup
      посуда: чашчека для эспрессо
    просто чашка: &cup
      посуда: чашка

  посуда-params:
  - name: чашечка эспрессо
    attrs:
    - маленькая чашечка
    - внутрия имеет форму яйца
    - это позволяет максимально сохранить плотность и пенку при наливании в чашку.
    - катекогрически не квадратная
  - name: просто чашка

        

name: Кофе
default-target:
rules:

- then:
  - вид: эспрессо
  when: &sample-when
    and: 
    - *based-on-self
    - *with-none
    - *one-espresso-shot
    - *time-20-30-sec
    - *temp-espresso 
    - вкус: горкий, насыщенный
    - пенка: крема
    - *espresso-cup

- when:
    and: 
    - *based-on-self
  then:
    - *with-none

# FIXME
- then:
  - вид: американо
  when: 
    and:
    - пенка: крема
    - *temp-espresso
    - *time-20-30-sec
    - основа: двойной эспрессо
    - вкус: нерезкий, деликатный 
    - *with-hot-water
    - *cup

# FIXME
- then:
  - вид: капучино
  when: 
    and:
    - содержит молоко: подогретое и вспененное
    - от молока только пенка?: наверно да
    - пенка: толстая и густая
    - крем?: да
    - посуда: подогретая чашка, 150-180 мл
    - время приготовления: 1.5 минут 
    - температура: 65 градусов 
    - приготовление:
      - в чашку одна порция эспрессо из кофе машины
      - в чашку вливают подогретое и вспененное паром молоко
    - латтер-арт: можно
    - вкус: баланс молока и кофе. Чувствуется и то и то. Идеальный баланс?
    - слои:
      - молочная пена: 1 см, бархатиста я и непористая
      - молоко
      - эспрессо 
      - или всех 1/3 или молока больше чем пены


# FIXME
- then:
  - вид: латте
  when:
    and:
    - основа: любой чёрный кофе
    - крем?: да, меньше чем в капучино
    - молоко: да, больше чем в капучино. Вспененное
    - пенка: 12 мм, кроме пенки ещё и слой молока
    - посуда: стакан 250-300 мл
    - вкус: нежный, лёгкий, кофейно сливочный
    - эспрессо: одна порция 
    - descr: самый большой и самый молочный напиток на эспрессо 
    - комфортная температура: 60-70 градусов
    - время приготовления: 3-8 минут 
    - слои:
      - 0.5 см пены
      - много молока
      - одно эспрессо 
    - приготовление: молоко вливают в кофе

# FIXME
- then:
  - вид: флэт уайт
  when: 
    and:
    - содержит молоко: нагретое паром
    - пенка: тонкий слой
    - эспрессо: двойная порция
    - вкус: больше вкус кофе, чем молока; яркий кофейный
    - объём: 150-180, как и капучино
    - температура: 70 градусов 
    - длительность приготовления: 5 минут 
    - приготовление:
      - прогреть чашку
      - взбить молоко
      - приготовить эспрессо 
      - влить молоко 
    - слои:
      - пенка: тонкая (2.5 мм)
      - молоко: не много
      - эспрессо: двойной
    - посуда: керамическая чашка

# FIXME
- then:
  - вид: раф
  when:
    and:
    - сахар: ванильный
    - сливки: да, взбитые паром
    - эспрессо: в сливки (и сироп?) добавляют шот
    - придумали: в москве
    - посуда: прогрета, чашка или высокий бокал
    - пенка: воздушная, глянцевая
    - объём: 124-160 мл
    - время приготовления: 5-10 минут 
    - комфортная температура: 50-60 градусов
    - приготовление:
      - смешать сливки и сахар 
      - залить к ним кофе
      - взбить смесь пароотводом
      - перелить в посуду, украсить и подать

# FIXME
- then:
  - вид: моккачино
  when: 
    and:
    - объём: 160-170 мл 
    - время приготовления: 15-20 минут 
    - температура: 50-60 градусов 
    - разновидность латте: да, с добавлением шоколада
    - шоколад: обычно порошок какао, можно и сироп
    - посуда: высокий прозрачный бокал, потому что красиво
    - приготовление: 
      - растопить 50г шоколада с ложкой молока, вылить в бокал 
      - сварить 50г кофе, перелить в бокал, не перемешивать
      - взбить холодное молоко капучинатором
      - перелить молоко по лезвию ножа в кофе 
      - взбить сливки в крутую пену, выложить
      - посыпать тёртым шоколадом 

# FIXME
- then:
  - вид: макиато
  when: 
    and:
    - эспрессо: шот
    - молоко: меньше молока, чем кофе
    - основа: только на эспрессо, латте, капучино и проч можно на любом  другом чёрном кофе
    - посуда: как для эспрессо 
    - температура: 65 градусов 
    - время приготовления: 3-5 минут 
    - объём: 45-65 мл
    - пенка: 15мм или чуть больше, \
            добавляют ложечкой по центру эспрессо
    - приготовление: 
      - взбить молоко, пока разогревается до 60 градусов
      - выложить лочекой в эспрессо 

# FIXME
- then:
  - вид: латте макиато
  when: 
    and:
    - молоко и пена: больше молока, чем пены?
    - посуда: irish бокал
    - слои: чётко видны тир слоя 
    - время приготовления: 3-8 минут 
    - температура: 60-70 градусов 
    - объём: 240 мл
    - основа: любой чёрный кофе
    - приготоволение: 
      - в молоко вливают кофе (3:1)
      - молоко и кофе лежат слоями
      
# FIXME
- then:
  - вид: ирландский кофе
  when:
    and:
    - время приготовления: 7-10 минут 
    - объём: 150-160 
    - ирладнский виски: да
    - кофе: чёрный
    - сахар: коричневый
    - взбитые сливки: да
    - эспрессо: крепкий
    - посуда: бокал, ополоснутый кипятком
    - приготоволение: 
      - взбить сливки заранее
      - сварить эспрессо
      - полоснуть бокал кипятком
      - положить в бокал сахар
      - залить горячим эспрессо, перемешать 
      - добавить виски 
      - осторожно влить сливки
  
