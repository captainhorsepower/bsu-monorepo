definitions:
  готовят на эспрессо: &based-on-espresso
    готовят на эспрессо: да
  объём: 
    малый: &small
      объём: шот
    средний: &medium
      объём: средний (~ 100мл)
    большой: &large
      объём: большой (~ 100мл)
  время приготовления:
    быстро: &quick-cook
      время приготовления: быстро

  помол кофе:
    мелкий: &small-pomol
      помол кофе: мелко молотый

  посуда:
  - чашечка
  - прозрачный стакан
  - другое
  вкус:
  - горький
  - сладкий
  - вкусный, лол
  способ приготовления:
    давление:
      высокое: &high-pressure
        высокое давление: да
  # игридиенты:
  #   молоко:
  #     да: &with-milk
  #       содержит молоко: да
  #     нет: &without-milk
  #       содержит молоко: нет
  #   сливки:
  #     да: &with-slivki?
  #       содержит взбитые сливки: да
  #     нет: &without-slivki?
  #       содержит взбитые сливки: нет

name: Кофе
default-target:
rules:
- then:
  - вид: эспрессо
  when: &sample-when
    and: 
    - *small
    - *quick-cook
    - *small-pomol
    - *high-pressure
    - вкус: горкий, насыщенный

- then:
  - вид: американо
  when: 
    and:
    - *based-on-espresso
    - эспрессо: + + много воды
- then:
  - вид: капучино
  when: 
    and:
    - содержит молоко: подогретое и вспененное
    - от молока только пенка?: наверно да
    - пенка: толстая и густая
    - *based-on-espresso
    - крем?: да
    - посуда: подогретая чашка, 150-180 мл
- then:
  - вид: латте
  when:
    and:
    - *based-on-espresso
    - крем?: да, меньше чем в капучино
    - молоко: да, больше чем в капучино. Вспененное
    - пенка: 12 мм, кроме пенки ещё и слой молока
    - посуда: стакан 240 мл
    - вкус: нежный
- then:
  - вид: флэт уайт
  when: 
    and:
    - содержит молоко: нагретое паром
    - пенка: тонкий слой
    - эспрессо: двойная порция
    - вкус: больше вкус кофе, чем молока
    - *based-on-espresso
- then:
  - вид: раф
  when:
    and:
    - *based-on-espresso
    - сахар: ванильный
    - сливки: да, взбитые паром
    - эспрессо: в сливки (и сироп?) добавляют шот
    - придумали: в москве

- then:
  - вид: моккачино
  when: 
    and:
    - разновидность латте: да, с добавлением шоколада
    - шоколад: обычно порошок какао, можно и сироп


- then:
  - вид: маккиато
  when: 
    and:
    - эспрессо: шот
    - молоко: небольшая, вспененная доза
    - пенка: 15мм или чуть больше, \
            добавляют ложечкой по центру эспрессо


- then:
  - вид: латте маккиато
  when: 
    and:
    - молоко и пена: больше молока, чем пены?
    - посуда: irish бокал
    - приготоволение: 
      - в молоко вливают кофе (3:1)
      - молоко и кофе лежат слоями
      

- then:
  - вид: ирландский
  when:
    and:
    - ирладнский виски: да
    - кофе: чёрный
    - сахар: коричневый
    - взбитые сливки: да
    - эспрессо: крепкий
    - посуда: бокал, ополоснутый кипятком
    - приготоволение: 
      - взбить сливки заранее
      - сварить эспрессо
      - полоснуть бокал кипятком
      - положить в бокал сахар
      - залить горячим эспрессо, перемешать 
      - добавить виски 
      - осторожно влить сливки
  
